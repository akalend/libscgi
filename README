The libscgi is lightweight framework realise the scgi prootocol http://en.wikipedia.org/wiki/SCGI It is simple scgi server based on libevent. You can use as backend to Apache/lighttpd/nginix ( http://nginx.org )

The field of use is lightweight scripts as quickly find, script of autocomplete, online dictionary.

Configure nginx scgi_module: 

	location /dictionary {
		scgi_pass localhost:8080;
		include scgi_params;
	 }
You can to change host/port.

The example of  code:

/**
* the cackback handler
* example Users logic
*/
class Handler: IScgiHandler {

	void run(map< string,string > * parms, char * buffUot) {
		string parm = getParam("REQUEST_METHOD",parms);
		// if method is POST 
		if ( parm == "POST" ) {
			// return to WEB-client the POST data
			strcpy(buffUot, getParam("POST_DATA",parms).c_str());
			return;	
		}
		// or return to WEB-client the QUERY_STRING parameter
		strcpy(buffUot, getParam("QUERY_STRING",parms).c_str());		  
	}
};


int main(int argc, char **argv)
{

	scgiServer scgi;

	if (scgi.checkPid()) {
		cerr << "the pid file exist or daemon already started\n" << endl;
		return 1;
	}
	
	if ((pid = scgi.demonize()) < 1) {
		if (pid == -1) {
			cerr << "demonize error\n";
			return 1;
		}	
		return 0;
	}
	
	if (scgi.init("127.0.0.1", 8080) ) {
		cerr << "server stopped\n";
		return 1;
	}
	
	scgi.addHandler("/dictionary",  reinterpret_cast<IScgiHandler *>(new Handler()));
	scgi.run();
}

INSTALL

make liby - compile the scgi-library
make  - compile the scgi-bin example
make ac - compile the city autocompile programm


City Autocomplete programm (as example)

The good example is city autocomplete. See source of the autocomplete.cpp.
The autocomplete program read the city names file. The format is csv: city lowcase name or shortname, city official name, range, id. The example:

"new york","New York",25,1267
"newyork","New York",25,1267
"washington",""Washington",10,1121
etc...

The range is sort order variable. For example:
Moscow - is Russian capital
Malinovka - is small city but if show by abc, the name "Malinovka" will showed before Moscow. Using range variable  show the name "Malinovka" after name "Moscow".




















